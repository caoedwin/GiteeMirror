{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}MQM_search{% endblock %}
{% block css %}
<link rel="stylesheet" href="/static/css/index.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
.content{
    width:25px;
    height: 70px;
    position: fixed;
    right: 10px;
    top:60px;
    background-color:#343957;
    color:white;
    font-size: 20px;
    text-align: center;
    margin: 0 auto;
    word-wrap: break-word;
    line-height: 24px;
    writing-mode: vertical-lr;
    z-index: 99;
    opacity: 0.9;
}
    #container-yansebiaoshi{
    display:none;
    position: fixed;
    right: 35px;
    top:60px;
    z-index: 99;
    border: 2px solid  #deb887;
}
    .el-pagination__total,.el-pagination__jump{
        color:white;
    }
    .el-table td.is-right, .el-table th.is-right {
    white-space: pre-line;
    text-align: left;
}
    .el-table .cell{
        white-space: pre-line;
    }
    .gutter{
        display:block!important;
        width:17px!important;
    }
    {% comment %}内容过长显示省略号{% endcomment %}
    .oneLine {
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }
    {% comment %}提示框宽度，提示内容换行{% endcomment %}
    .el-tooltip__popper{
    max-width: 400px;
    white-space: pre-line;
    }
    #sh {
        font-size:18px;
           font-family:微软雅黑;
        border: 2px solid #9f9ca1;
    }
    #sh::-webkit-input-placeholder{
            color:#2f97a8;
        font-family:微软雅黑;
    }
    #sh::-moz-placeholder{
            color:#2f97a8;
        font-family:微软雅黑;
    }
    #sh:-ms-input-placeholder{
            color:#2f97a8;
        font-family:微软雅黑;
    }
    .el-icon-question:before {
    color:yellowgreen;
    font-size: xx-large;
}
    </style>
{% endblock %}
{% block content %}
     <div class="content" id="yincang">spec</div>
    <div id="container-yansebiaoshi">
    <img src="/static/images/spec.png">
    </div>
<div id="app">
<div class="row" style="white-space: nowrap;">
                    <div class="col-md-3">
                    <label style="color: #FFF" for="Customer">Customer</label>
           <select id="Customer" ref="Customer"  @change="changeCustomer" v-model="selectedCustomer" style="height:30px;width:100px;border-radius:5px 5px 5px 5px;">
               <option value="">All</option>
               <option v-for="(item,key,index) in selectItem" >${ key }</option>
           </select>
                    </div>
                    <div class="col-md-2">
                        　<label style="color: #FFF" for="Project">Project</label>
           <select id="Project" ref="Project"   v-model="selectedProject" style="height:30px;border-radius:5px 5px 5px 5px;width:100px;">
               <option value="">All</option>
               <option v-for="(item,key,index) in selectProject">${ item.Project }</option>
           </select>
                    </div>
          <div class="col-md-2">
                        　　<label style="color: #FFF" for="Category">Category</label>
             <select id="Category" ref="Category"  v-model="selectedCategory" style="height:30px;border-radius:5px 5px 5px 5px;width:70px;">
               <option value="">All</option>
               <option v-for="(item,key,index) in selectCategory">${ item.Category }</option>
           </select>
                    </div>
                    <div class="col-md-1">
                        <el-button :loading="elbuttonloading" size="small" style="background:#428bca;color:#fff;" value="Search" name="Search" @click="selectMsg">Search</el-button>
                    </div>
                    <div class="col-md-1">
                        <el-button size="small" v-if="canExport==1" @click="exportExcel" type="info" >Export</el-button>
                    </div>
                    <div class="col-md-1">
                        <a v-if="canShow!==0" size="small" href="file:\\10.129.83.21\files_MQM\" style="color: #FFFAF0">
                            <el-button size="small" style="background:#428bca;color:#fff;">Attachment</el-button>
                        </a>

{#                        <a size="small" v-if="canExport==1" href="file:///D:\work/" >Attachment</a>#}
{#                        <form action="file://10.129.83.21/files_MQM/">#}
{#                            <input type="submit" value="Go to forder">#}
{#                        </form>#}
                    </div>
                    <div class="col-md-1">
                        <el-tooltip v-if="canShow!==0" class="item" effect="dark" placement="top">
                            <div slot="content">提示：<br/>1.下载：出于安全考虑，Chrome将禁止打开本地及网络路径，请先点击“Chrome插件”按钮，按照sop安装插件。<br />2.上传：按Win+R输入“\\10.129.83.21\files_MQM”（目前仅限DQA人员才有权限）</div>
                            <a v-if="canShow!==0" size="small" href="/static/src/modelfiles/enable-local-file-links.zip" style="color: #FFFAF0">
                                <el-button size="small" type="info" >Chrome插件</el-button>
                            </a>
                        </el-tooltip>
                    </div>
{#                    <div class="col-md-1">#}
{#                        <el-tooltip v-if="canExport==1" class="item" effect="dark" content="提示：<br />下载：出于安全考虑，Chrome将禁止打开本地及网络路径，请先点击“Chrome插件”按钮，安装插件。<br />上传：打开Win+R输入“\\10.129.83.21\files_MQM”（目前仅限DQA人员才有权限）" placement="right"><i class="el-icon-question"></i></el-tooltip>#}
{#                    </div>#}
          </div>
<template>
<el-input type="text" v-model="search" id="sh" placeholder="关键字搜索......"></el-input>
   <el-table id="out-table" border height="750" @sort-change='sortChange' :default-sort = "{prop: 'CompalPN', order: 'ascending'}" :data="datas_computed.slice((currentPage-1)*pageSize,currentPage*pageSize)" tooltip-effect="dark" style="width: 100%"
   :cell-style="addClass"
   v-loading="tableloading"
        element-loading-text="數據更新中，請稍後"
        border>
    <el-table-column type="index" :index="indexMethod" fixed></el-table-column>
       <el-table-column prop="Project" label="Project" align="center" width="120" sortable='custom' fixed></el-table-column>
       <el-table-column prop="Category" label="Category" align="center" width="156" sortable='custom' fixed></el-table-column>
       <el-table-column prop="Name" label="Name" align="center" width="156" sortable='custom' fixed></el-table-column>
    <el-table-column prop="Vendor" label="Vendor" align="center" sortable='custom' fixed></el-table-column>
       <el-table-column label="B for DQA" align="center">
       <el-table-column prop="DataCodeB" label="D/C" width="100" align="center" sortable='custom'></el-table-column>
       <el-table-column prop="ResultforB" label="Result" width="100" align="center" sortable='custom'>
           <template slot-scope="scope">
                  <el-tooltip v-if="scope.row.Comments" class="item" effect="dark" placement="top">
                            <div v-html="ToBreak(scope.row.Comments)" slot="content"></div>
                            <div class="oneLine">${ scope.row.ResultforB }</div>
                        </el-tooltip>
                   <span v-else="scope.row.Comments">${ scope.row.ResultforB }</span>
              </template>
       </el-table-column>
       <el-table-column v-if="canShow!==0" prop="ReliabilityB" label="Rel." width="100" align="center" sortable='custom'></el-table-column>
       <el-table-column v-if="canShow!==0" prop="CompatibilityB" label="Com." width="110"  align="center" sortable='custom'></el-table-column>

    </el-table-column>
{#    <el-table-column label="B for RD" align="center">#}
{#       <el-table-column prop="ESDB" label="ESD" width="50"  align="center" show-overflow-tooltip></el-table-column>#}
{#       <el-table-column prop="EMIB" label="EMI" width="50"  align="center" show-overflow-tooltip></el-table-column>#}
{#       <el-table-column prop="RFB" label="RF" width="50"  align="center" show-overflow-tooltip></el-table-column>#}
{#    </el-table-column>#}
       <el-table-column label="C for DQA" align="center">
       <el-table-column prop="DataCodeC" label="D/C" width="100" align="center" sortable='custom'></el-table-column>
       <el-table-column prop="ResultforC" label="Result" width="100" align="center" sortable='custom'>
           <template slot-scope="scope">
                  <el-tooltip v-if="scope.row.Comments" class="item" effect="dark" placement="top">
                            <div v-html="ToBreak(scope.row.Comments)" slot="content"></div>
                            <div class="oneLine">${ scope.row.ResultforC }</div>
                        </el-tooltip>
                   <span v-else="scope.row.Comments">${ scope.row.ResultforC }</span>
              </template>
       </el-table-column>
       <el-table-column v-if="canShow!==0" prop="ReliabilityC" label="Rel." width="100" align="center" sortable='custom'></el-table-column>
       <el-table-column v-if="canShow!==0" prop="CompatibilityC" label="Comp." width="110"  align="center" sortable='custom'></el-table-column>
    </el-table-column>
{#    <el-table-column label="C for RD" align="center">#}
{#       <el-table-column prop="ESDC" label="ESD" width="50"  align="center" show-overflow-tooltip></el-table-column>#}
{#       <el-table-column prop="EMIC" label="EMI" width="50"  align="center" show-overflow-tooltip></el-table-column>#}
{#       <el-table-column prop="RFC" label="RF" width="50"  align="center" show-overflow-tooltip></el-table-column>#}
{#    </el-table-column>#}
       <el-table-column label="INV for DQA" align="center">
       <el-table-column prop="DataCodeINV" label="Data Code" width="100" align="center" sortable='custom'></el-table-column>
       <el-table-column prop="ResultforINV" label="Result for INV" width="110" align="center" sortable='custom'>
           <template slot-scope="scope">
                  <el-tooltip v-if="scope.row.Comments" class="item" effect="dark" placement="top">
                            <div v-html="ToBreak(scope.row.Comments)" slot="content"></div>
                            <div class="oneLine">${ scope.row.ResultforINV }</div>
                        </el-tooltip>
                   <span v-else="scope.row.Comments">${ scope.row.ResultforINV }</span>
              </template>
       </el-table-column>
       <el-table-column v-if="canShow!==0" prop="ReliabilityINV" label="Reliability" width="100" align="center" sortable='custom'></el-table-column>
       <el-table-column v-if="canShow!==0" prop="CompatibilityINV" label="Compatibility" width="110"  align="center" sortable='custom'></el-table-column>
    </el-table-column>
{#    <el-table-column label="INV for RD" align="center">#}
{#       <el-table-column prop="ESDINV" label="ESD" width="50"  align="center" show-overflow-tooltip></el-table-column>#}
{#       <el-table-column prop="EMIINV" label="EMI" width="50"  align="center" show-overflow-tooltip></el-table-column>#}
{#       <el-table-column prop="RFINV" label="RF" width="50"  align="center" show-overflow-tooltip></el-table-column>#}
{#    </el-table-column>#}
    <el-table-column prop="Controlrun" label="Control run" width="100" align="center" sortable='custom'></el-table-column>
    <el-table-column prop="SourcePriority" label="SP" width="40" align="center" sortable='custom'></el-table-column>
    <el-table-column prop="CompalPN" label="Compal P/N" align="center" width="113" sortable='custom'></el-table-column>
    <el-table-column prop="Status" label="Status" align="center" sortable='custom'></el-table-column>
    <el-table-column prop="VendorPN" label="VendorP/N" align="center" width="100" sortable='custom'></el-table-column>
    <el-table-column prop="Description" label="Description"  align="center" width="204" sortable='custom'></el-table-column>
    <el-table-column prop="Qty" label="Qty"  align="center" sortable='custom'></el-table-column>
    <el-table-column prop="Location" label="Location"  align="center" width="126" sortable='custom'></el-table-column>
    <el-table-column id="st" prop="Comments" label="Comments" width="500" align="right" style="white-space: pre-line;" sortable='custom'></el-table-column>
   </el-table>
    <div class="block">
    <el-pagination  @size-change="handleSizeChange" @current-change="handleCurrentChange" :current-page="currentPage" :page-sizes="[10, 50, 100, 200]" :page-size="100" layout="total, sizes, prev, pager, next, jumper" :total="total_computed">
    </el-pagination>
  </div>
</template>
</div>
{% endblock %}
{% block scripts %}
<script src="/static/js/es6/polyfill.min.js"></script>
<script src="/static/js/es6/babel.min.js"></script>
<script src="/static/js/axios.min.js"></script>
<script src="/static/js/vue.min.js"></script>
<script src="/static/js/qs.js"></script>
<script src="/static/js/Element/index.js"></script>
    <script src="/static/js/xlsx/FileSaver.min.js"></script>
<script type="text/babel">
$(document).ready(function() {
    $("#yincang").click(function () {
        $("#container-yansebiaoshi").toggle();
    });
    $("body").click(function (e) {
    if (!$(e.target).closest("#yincang").length) {
        $("#container-yansebiaoshi").hide();
    }
    });
})
new Vue({
    el:'#app',
    delimiters: ['${', '}'],
    data: function () {
            return {
                visible: false,
                tableContent: [],
                selectedCustomer:null,
                selectedProject:null,
                selectCategory:[],
                selectedCategory:null,
                canExport:null,
                canShow:null,
                {#selectedLocation:null,#}
                {#selectLocation:null,#}
                {#selectedCompalPN:null,#}
                {#selectCompalPN:null,#}
                selectProject:[],
                selectItem:{},
                selectId:null,
                result:{},
                choose:false,
                currentPage: 1,//默认显示第一页
                pageSize:100,//默认每页显示100条
                totalNum: null,
                search:'',
                Totalsize:null,
                elbuttonloading:false,
                tableloading:false,

            }
        },
    mounted(){        // 页面渲染后触发该区域内容 即页面初始化
            this.getdata("first");
        },
        methods: {
        sortChange: function(column){
            this.currentPage = 1 // return to the first page after sorting
                if (column.prop === 'Project') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                } else if (column.prop === 'Category') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'Name') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'Vendor') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'SourcePriority') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'CompalPN') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'Status') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'VendorPN') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'Description') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'Qty') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'Location') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'DataCodeB') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'ReliabilityB') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'CompatibilityB') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'ResultforB') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'DataCodeC') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'ReliabilityC') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'CompatibilityC') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'ResultforC') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'DataCodeINV') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'ReliabilityINV') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'CompatibilityINV') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'ResultforINV') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'Controlrun') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }else if (column.prop === 'Comments') {
                    this.dataList = this.tableContent.sort(this.sortFun(column.prop, column.order === 'ascending'));
                    console.log(this.dataList);
                }
                    this.showed_data = this.tableContent.slice(0, this.pageSize) // 排序完显示到第一页
                    console.log('Finished');
                    console.log(this.showed_data);

        },
            //排序方法
           sortFun: function(attr, rev) {            //第一个参数传入info里的prop表示排的是哪一列，第二个参数是升还是降排序
           if (rev == undefined) {
               rev = 1;
           } else {
               rev = (rev) ? 1 : -1;
           }
                return function (a, b) {
                    a = a[attr];
                    b = b[attr];
                    if (a < b) {
                        return rev * -1;
                    }
                    if (a > b) {
                        return rev * 1;
                    }
                    return 0;
                }
            },


        handleSizeChange(val) {
        console.log(`每页 ${val} 条`);
                this.pageSize = val;
      },
      handleCurrentChange(val) {
        console.log(`当前页: ${val}`);
          this.currentPage = val;
          console.log(this.tableContent.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize));
      },
            //获取数据
            getdata: function (e) {
                this.tableloading = true;
                this.elbuttonloading = true;
                let data = {"isGetData": e, "csrfmiddlewaretoken": $("[name='csrfmiddlewaretoken']").val()};
                axios.post("/MQM/MQM_search/", Qs.stringify(data), {
                    headers: {'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'}
                }).then((res) => {
                    this.tableContent = res.data.content;
                    this.selectItem = res.data.select;
                    this.canExport = res.data.canExport;
                    this.canShow = res.data.canShow;
                    this.totalNum=this.tableContent.length;
                    this.tableloading = false;
                    this.elbuttonloading = false;
                });
            },
            indexMethod(index) {
                    return index +1;
            },
            changeCustomer:function () {
                 if(this.$refs.Customer.value ==""){
                      this.selectProject=[""];
                      this.selectCategory=[""];
                      return false;
                 }
                 this.selectProject=this.selectItem[this.$refs.Customer.value]["Project"];
                 this.selectCategory = this.selectItem[this.$refs.Customer.value]["Category"];
                 this.selectedProject="";
                this.selectedCategory="";
                 console.log(this.selectProject,this.selectCategory);
             },
            //上传搜索项：以此选项搜索符合条件的内容
             selectMsg :function(){
                this.tableloading = true;
                this.elbuttonloading = true;
               let Customer = this.$refs.Customer.value;
               let Project = this.$refs.Project.value;
                let Category = this.$refs.Category.value;

               let data ={"isGetData":"SEARCH","Customer":Customer,"Project":Project,"Category":Category,"csrfmiddlewaretoken":$("[name='csrfmiddlewaretoken']").val()}
               axios.post("/MQM/MQM_search/",Qs.stringify(data), {
               headers:{ 'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'}
                }).then((res) => {
                  console.log(res.data.content);
                  this.tableContent=res.data.content.sort(this.sortFun("CompalPN",  'ascending'));//用sort-change方法对分页后台排序时，默认排序列
                  this.selectItem=res.data.select;
                  this.totalNum=this.tableContent.length;
                  this.tableloading = false;
                this.elbuttonloading = false;
                })
             },
            //導出表格
      exportExcel:function (){
          let temp=[];
         temp.push(Number(this.currentPage));
         temp.push(Number(this.pageSize));
          this.currentPage = 1; //当前页为第一页
          this.pageSize = this.Totalsize; //每页大小限制条数：为总条数（将表格数据全部渲染出来在第一页上）
        this.$nextTick(function () {
               /* 从表生成工作簿对象 */
             let table = document.querySelector("#out-table").cloneNode(true);
             // 因为element-ui的表格的fixed属性导致多出一个table，会下载重复内容，这里删除掉
             table.removeChild(table.querySelector(".el-table__fixed"))
                //let wb = XLSX.utils.table_to_book(table,{raw:true});//mytable为表格的id名

            var wb = XLSX.utils.table_to_book(table,{raw:true});
            /* 获取二进制字符串作为输出 */
            var wbout = XLSX.write(wb, {
                bookType: "xlsx",
                bookSST: true,
                type: "array"
            });
            try {
                saveAs(
                //Blob 对象表示一个不可变、原始数据的类文件对象。
                //Blob 表示的不一定是JavaScript原生格式的数据。
                //File 接口基于Blob，继承了 blob 的功能并将其扩展使其支持用户系统上的文件。
                //返回一个新创建的 Blob 对象，其内容由参数中给定的数组串联组成。
                new Blob([wbout], { type: "application/octet-stream" }),
                //设置导出文件名称
                "sheetjs.xlsx"
                );
            } catch (e) {
                if (typeof console !== "undefined") console.log(e, wbout);
            }
            this.currentPage=temp[0];
            this.pageSize=temp[1];//edwin:要想导出后回到当前页而不是第一页，<el-pagination里面的:page-size="100"，而不能是:page-size="pageSize"
            temp=[];
            return wbout;
            });
        },
      test:function (row) {
          console.log("trt");
      },
            addClass({row, column, rowIndex, columnIndex}) {
                {% comment %}console.log('addcolor',rowIndex, columnIndex){% endcomment %}
                {% comment %}if (columnIndex === 7 && (row.ReliabilityB === 'QS'|| row.ReliabilityB === 'Qd_L'|| row.ReliabilityB === 'Qd_C')) {
                    console.log("lie",row)
                        return {
                                  background: '#00FF00'
                                }
                }
                if (columnIndex === 8 && (row.CompatibilityB === 'QS'|| row.CompatibilityB === 'Qd_L'|| row.CompatibilityB === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }{% endcomment %}
                if (this.canShow === 1){
                    if (columnIndex === 6 && (row.ResultforB === 'QS'|| row.ResultforB === 'Qd_L'|| row.ResultforB === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
                {% comment %}if (columnIndex === 11 && (row.ReliabilityC === 'QS'|| row.ReliabilityC === 'Qd_L'|| row.ReliabilityC === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
                if (columnIndex === 12 && (row.CompatibilityC === 'QS'|| row.CompatibilityC === 'Qd_L'|| row.CompatibilityC === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }{% endcomment %}
                if (columnIndex === 10 && (row.ResultforC === 'QS'|| row.ResultforC === 'Qd_L'|| row.ResultforC === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
               {% comment %} if (columnIndex === 15 && (row.ReliabilityINV === 'QS'|| row.ReliabilityINV === 'Qd_L'|| row.ReliabilityINV === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
                if (columnIndex === 16 && (row.CompatibilityINV === 'QS'|| row.CompatibilityINV === 'Qd_L'|| row.CompatibilityINV === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }{% endcomment %}
                if (columnIndex === 14 && (row.ResultforINV === 'QS'|| row.ResultforINV === 'Qd_L'|| row.ResultforINV === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }

                {% comment %}if (columnIndex === 7 && row.ReliabilityB === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                if (columnIndex === 8 && row.CompatibilityB === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }{% endcomment %}
                if (columnIndex === 6 && row.ResultforB === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
               {% comment %} if (columnIndex === 11 && row.ReliabilityC === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                if (columnIndex === 12 && row.CompatibilityC === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }{% endcomment %}
                if (columnIndex === 10 && row.ResultforC === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                {% comment %}if (columnIndex === 15 && row.ReliabilityINV === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                if (columnIndex === 16 && row.CompatibilityINV === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }{% endcomment %}
                if (columnIndex === 14 && row.ResultforINV === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }


                {% comment %}if (columnIndex === 7 && (row.ReliabilityB === 'QF'|| row.ReliabilityB === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 8 && (row.CompatibilityB === 'QF'||row.CompatibilityB === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }{% endcomment %}
                if (columnIndex === 6 && (row.ResultforB === 'QF'|| row.ResultforB === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                {% comment %}if (columnIndex === 11 && (row.ReliabilityC === 'QF'||row.ReliabilityC === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 12 && (row.CompatibilityC === 'QF'|| row.CompatibilityC === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }{% endcomment %}
                if (columnIndex === 10 && (row.ResultforC === 'QF'|| row.ResultforC === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                {% comment %}if (columnIndex === 15 && (row.ReliabilityINV === 'QF'|| row.ReliabilityINV === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 16 && (row.CompatibilityINV === 'QF'|| row.CompatibilityINV === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }{% endcomment %}
                if (columnIndex === 14 && (row.ResultforINV === 'QF'|| row.ResultforINV === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }


                {% comment %}if (columnIndex === 7 && (row.ReliabilityB === 'Drop'|| row.ReliabilityB === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                if (columnIndex === 8 && (row.CompatibilityB === 'Drop'|| row.CompatibilityB === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }{% endcomment %}
                if (columnIndex === 6 && (row.ResultforB === 'Drop'|| row.ResultforB === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                {% comment %}if (columnIndex === 11 && (row.ReliabilityC === 'Drop'|| row.ReliabilityC === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                if (columnIndex === 12 && (row.CompatibilityC === 'Drop'|| row.CompatibilityC === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }{% endcomment %}
                if (columnIndex === 10 && (row.ResultforC === 'Drop'|| row.ResultforC === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                {% comment %}if (columnIndex === 15 && (row.ReliabilityINV === 'Drop'|| row.ReliabilityINV === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                if (columnIndex === 16 && (row.CompatibilityINV === 'Drop'|| row.CompatibilityINV === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }{% endcomment %}
                if (columnIndex === 14 && (row.ResultforINV === 'Drop'|| row.ResultforINV === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                }else
                {
                    if (columnIndex === 6 && (row.ResultforB === 'QS'|| row.ResultforB === 'Qd_L'|| row.ResultforB === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
                {% comment %}if (columnIndex === 11 && (row.ReliabilityC === 'QS'|| row.ReliabilityC === 'Qd_L'|| row.ReliabilityC === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
                if (columnIndex === 12 && (row.CompatibilityC === 'QS'|| row.CompatibilityC === 'Qd_L'|| row.CompatibilityC === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }{% endcomment %}
                if (columnIndex === 8 && (row.ResultforC === 'QS'|| row.ResultforC === 'Qd_L'|| row.ResultforC === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
               {% comment %} if (columnIndex === 15 && (row.ReliabilityINV === 'QS'|| row.ReliabilityINV === 'Qd_L'|| row.ReliabilityINV === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
                if (columnIndex === 16 && (row.CompatibilityINV === 'QS'|| row.CompatibilityINV === 'Qd_L'|| row.CompatibilityINV === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }{% endcomment %}
                if (columnIndex === 10 && (row.ResultforINV === 'QS'|| row.ResultforINV === 'Qd_L'|| row.ResultforINV === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }

                {% comment %}if (columnIndex === 7 && row.ReliabilityB === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                if (columnIndex === 8 && row.CompatibilityB === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }{% endcomment %}
                if (columnIndex === 6 && row.ResultforB === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
               {% comment %} if (columnIndex === 11 && row.ReliabilityC === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                if (columnIndex === 12 && row.CompatibilityC === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }{% endcomment %}
                if (columnIndex === 8 && row.ResultforC === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                {% comment %}if (columnIndex === 15 && row.ReliabilityINV === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                if (columnIndex === 16 && row.CompatibilityINV === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }{% endcomment %}
                if (columnIndex === 10 && row.ResultforINV === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }


                {% comment %}if (columnIndex === 7 && (row.ReliabilityB === 'QF'|| row.ReliabilityB === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 8 && (row.CompatibilityB === 'QF'||row.CompatibilityB === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }{% endcomment %}
                if (columnIndex === 6 && (row.ResultforB === 'QF'|| row.ResultforB === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                {% comment %}if (columnIndex === 11 && (row.ReliabilityC === 'QF'||row.ReliabilityC === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 12 && (row.CompatibilityC === 'QF'|| row.CompatibilityC === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }{% endcomment %}
                if (columnIndex === 8 && (row.ResultforC === 'QF'|| row.ResultforC === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                {% comment %}if (columnIndex === 15 && (row.ReliabilityINV === 'QF'|| row.ReliabilityINV === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 16 && (row.CompatibilityINV === 'QF'|| row.CompatibilityINV === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }{% endcomment %}
                if (columnIndex === 10 && (row.ResultforINV === 'QF'|| row.ResultforINV === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }


                {% comment %}if (columnIndex === 7 && (row.ReliabilityB === 'Drop'|| row.ReliabilityB === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                if (columnIndex === 8 && (row.CompatibilityB === 'Drop'|| row.CompatibilityB === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }{% endcomment %}
                if (columnIndex === 6 && (row.ResultforB === 'Drop'|| row.ResultforB === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                {% comment %}if (columnIndex === 11 && (row.ReliabilityC === 'Drop'|| row.ReliabilityC === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                if (columnIndex === 12 && (row.CompatibilityC === 'Drop'|| row.CompatibilityC === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }{% endcomment %}
                if (columnIndex === 8 && (row.ResultforC === 'Drop'|| row.ResultforC === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                {% comment %}if (columnIndex === 15 && (row.ReliabilityINV === 'Drop'|| row.ReliabilityINV === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                if (columnIndex === 16 && (row.CompatibilityINV === 'Drop'|| row.CompatibilityINV === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }{% endcomment %}
                if (columnIndex === 10 && (row.ResultforINV === 'Drop'|| row.ResultforINV === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                }


                },
            ToBreak (val) {

              if(val){
                  //console.log(val.replace('\n', '<br />'),"val")
                  return val.replace('\n', '<br />')
              }
            },
        },
        computed:{
                datas_computed(){
                    console.log(111)
                    const search=this.search;
                    if(search){
                        return this.tableContent.filter(data=>{
                            return Object.keys(data).some(key=>{
                                return String(data[key]).toLowerCase().indexOf(search.toLowerCase())>-1
                            })
                        })
                    }
                    this.totalNum = this.tableContent.length;
                    return this.tableContent
                },
                total_computed () {
                    this.Totalsize = this.datas_computed.length;//edwin:export数据的个数
                    console.log(this.Totalsize);
                  return this.datas_computed.length
                }
            },
        watch: {
                dataList() {
                    this.showed_data = this.tableContent.slice((this.currentPage - 1) * this.pageSize, this.currentPage * this.pageSize);
                }
            },

})
</script>
{% endblock %}