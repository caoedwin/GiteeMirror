{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}MQM_edit{% endblock %}
{% block css %}
<link rel="stylesheet" href="/static/css/index.css">
    <style>
.content{
    width:25px;
    height: 70px;
    position: fixed;
    right: 10px;
    top:60px;
    background-color:#343957;
    color:white;
    font-size: 20px;
    text-align: center;
    margin: 0 auto;
    word-wrap: break-word;
    line-height: 24px;
    writing-mode: vertical-lr;
    z-index: 99;
    opacity: 0.9;
}
    #container-yansebiaoshi{
    display:none;
    position: fixed;
    right: 35px;
    top:60px;
    z-index: 99;
    border: 2px solid  #deb887;
}
    .el-pagination__total,.el-pagination__jump{
        color:white;
    }
    .gutter{
        display:block!important;
        width:17px!important;
    }
    .cell-green{
    background: greenyellow;
}
    </style>
{% endblock %}
{% block content %}
    <div class="content" id="yincang">spec</div>
    <div id="container-yansebiaoshi">
    <img src="/static/images/spec.png">
    </div>
<div id="app">
<div class="row" style="white-space: nowrap;">
                    <div class="col-md-3">
                    <label style="color: #FFF" for="Customer">Customer</label>
           <select id="Customer" ref="Customer"  @change="changeCustomer" v-model="selectedCustomer" style="height:30px;width:100px;border-radius:5px 5px 5px 5px;">
               <option value="">All</option>
               <option v-for="(item,key,index) in selectItem" >${ key }</option>
           </select>
                    </div>
                    <div class="col-md-3">
                        　<label style="color: #FFF" for="Project">Project</label>
           <select id="Project" ref="Project"  @change="changeProject" v-model="selectedProject" style="height:30px;border-radius:5px 5px 5px 5px;width:100px;">
               <option value="">All</option>
               <option v-for="(item,key,index) in selectProject">${ item.Project }</option>
           </select>
                    </div>
                    <div class="col-md-1">
                        <el-button :loading="elbuttonloading" size="small" style="background:#428bca;color:#fff;" value="Search" name="Search" @click="selectMsg">Search</el-button>
                    </div>
                  <div class="col-md-1">
                    <el-button size="small" type="danger" v-if="statu === 4 || statu === 6" @click="multiDelete">批量删除</el-button>
                  </div>
          </div>
<template>
    {% comment %}<el-input v-model="search" placeholder="请输入内容模糊搜索"></el-input>{% endcomment %}
    <el-table border height="750" ref="multipleTable" @selection-change="handleSelectionChange" :row-key="getRowKeys" :data="tableContent.slice((currentPage-1)*pageSize,currentPage*pageSize)"
    :cell-style="addClass"
    v-loading="tableloading"
        element-loading-text="數據更新中，請稍後"
        border>
        <el-table-column type="selection" width="50" fixed></el-table-column>
        <el-table-column type="index" :index="indexMethod" fixed></el-table-column>
        <el-table-column label="Project" align="center" width="120" fixed>
            <template slot-scope="scope">
            <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.Project"></el-input>
                    <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ project[scope.$index+(currentPage-1)*pageSize] }</span>
       </template>
        </el-table-column>
        <el-table-column label="Category" align="center" width="156" fixed>
            <template slot-scope="scope">
            <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.Category"></el-input>
                <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ category[scope.$index+(currentPage-1)*pageSize] }</span>
       </template>
        </el-table-column>
        <el-table-column label="Name" align="center" width="156" fixed>
            <template slot-scope="scope">
            <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.Name"></el-input>
                <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ name[scope.$index+(currentPage-1)*pageSize] }</span>
       </template>
        </el-table-column>
        <el-table-column label="Vendor" align="center" fixed>
            <template slot-scope="scope">
            <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.Vendor"></el-input>
                <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ vendor[scope.$index+(currentPage-1)*pageSize] }</span>
            </template>
        </el-table-column>
        <el-table-column  label="B for DQA" align="center">
            <el-table-column label="D/C" width="100" align="center">
                <template slot-scope="scope">
                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.DataCodeB"></el-input>
                      <span  v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ datacodeb[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>
            <el-table-column label="Result" width="100" align="center">
                <template slot-scope="scope">
                    <span v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ scope.row.ResultforB }</span>
                     <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ resultforb[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>
            <el-table-column label="Rel." width="110" align="center">
                <template slot-scope="scope">
                      <el-select class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"  @change="changeresultB(scope.row,scope.$index)"  v-model="scope.row.ReliabilityB">
                           <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value"></el-option>
                      </el-select>
                      <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ reliabilityb[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>
            <el-table-column label="Com." width="110" align="center">
                <template slot-scope="scope">
                      <el-select class="edit-cell" v-if="showEdit[scope.$index] && (statu === 5 || statu === 4)"  @change="changeresultB(scope.row,scope.$index)"  v-model="scope.row.CompatibilityB">
                          <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value"></el-option>
                      </el-select>
                      <span v-else="showEdit[scope.$index] && (statu === 5 || statu === 4)">${ compatibilityb[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>

        </el-table-column>
{#        <el-table-column  label="B for RD" align="center">#}
{#            <el-table-column label="ESD" width="50" align="center">#}
{#                <template slot-scope="scope">#}
{#                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 2 || statu === 4)"    v-model="scope.row.ESDB"></el-input>#}
{#                      <span v-else="showEdit[scope.$index] && (statu === 2 || statu === 4)">${ esdb[scope.$index+(currentPage-1)*pageSize] }</span>#}
{#                </template>#}
{#            </el-table-column>#}
{#            <el-table-column label="EMI" width="50" align="center">#}
{#                <template slot-scope="scope">#}
{#                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 2 || statu === 4)"    v-model="scope.row.EMIB"></el-input>#}
{#                      <span v-else="showEdit[scope.$index] && (statu === 2 || statu === 4)">${ emib[scope.$index+(currentPage-1)*pageSize] }</span>#}
{#                </template>#}
{#            </el-table-column>#}
{#            <el-table-column label="RF" width="50" align="center">#}
{#                <template slot-scope="scope">#}
{#                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 2 || statu === 4)"    v-model="scope.row.RFB"></el-input>#}
{#                      <span v-else="showEdit[scope.$index] && (statu === 2 || statu === 4)">${ rfb[scope.$index+(currentPage-1)*pageSize] }</span>#}
{#                </template>#}
{#            </el-table-column>#}
{#        </el-table-column>#}
        <el-table-column label="C for DQA" align="center" align="center" >
            <el-table-column label="D/C" width="100" align="center">
                <template slot-scope="scope">
                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.DataCodeC"></el-input>
                      <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ datacodec[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>
                        <el-table-column label="Result" width="100" align="center">
                <template slot-scope="scope">
                    <span v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ scope.row.ResultforC }</span>
                      <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ resultforc[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>

            <el-table-column label="Rel." width="110" align="center">
                <template slot-scope="scope">
                      <el-select class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"  @change="changeresultC(scope.row,scope.$index)"  v-model="scope.row.ReliabilityC">
                          <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value"></el-option>
                      </el-select>
                      <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ reliabilityc[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>
            <el-table-column label="Com." width="110" align="center">
                <template slot-scope="scope">
                      <el-select class="edit-cell" v-if="showEdit[scope.$index] && (statu === 5 || statu === 4)"  @change="changeresultC(scope.row,scope.$index)"  v-model="scope.row.CompatibilityC">
                          <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value"></el-option>
                      </el-select>
                      <span v-else="showEdit[scope.$index] && (statu === 5 || statu === 4)">${ compatibilityc[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>
        </el-table-column>
{#        <el-table-column label="C for RD" align="center">#}
{#            <el-table-column label="ESD" width="50" align="center">#}
{#                <template slot-scope="scope">#}
{#                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 2 || statu === 4)"    v-model="scope.row.ESDC"></el-input>#}
{#                      <span v-else="showEdit[scope.$index] && (statu === 2 || statu === 4)">${ esdc[scope.$index+(currentPage-1)*pageSize] }</span>#}
{#                </template>#}
{#            </el-table-column>#}
{#            <el-table-column label="EMI" width="50" align="center">#}
{#                <template slot-scope="scope">#}
{#                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 2 || statu === 4)"    v-model="scope.row.EMIC"></el-input>#}
{#                      <span v-else="showEdit[scope.$index] && (statu === 2 || statu === 4)">${ emic[scope.$index+(currentPage-1)*pageSize] }</span>#}
{#                </template>#}
{#            </el-table-column>#}
{#            <el-table-column label="RF" width="50" align="center">#}
{#                <template slot-scope="scope">#}
{#                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 2 || statu === 4)"    v-model="scope.row.RFC"></el-input>#}
{#                      <span v-else="showEdit[scope.$index] && (statu === 2 || statu === 4)">${ rfc[scope.$index+(currentPage-1)*pageSize] }</span>#}
{#                </template>#}
{#            </el-table-column>#}
{#        </el-table-column>#}
        <el-table-column label="INV for DQA" align="center" align="center" >
            <el-table-column label="Data Code" width="100" align="center">
                <template slot-scope="scope">
                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 4||statu === 7)"    v-model="scope.row.DataCodeINV"></el-input>
                      <span v-else="showEdit[scope.$index] && (statu === 4||statu === 7)">${ datacodeinv[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>
            <el-table-column label="Result for INV" width="110" align="center">
                <template slot-scope="scope">
                    <span v-if="showEdit[scope.$index] && (statu === 4||statu === 7)">${ scope.row.ResultforINV }</span>
                      <span v-else="showEdit[scope.$index] && (statu === 4||statu === 7)">${ resultforinv[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>
            <el-table-column label="Reliability" width="110" align="center">
                <template slot-scope="scope">
                      <el-select class="edit-cell" v-if="showEdit[scope.$index] && (statu === 7 || statu === 4)"  @change="changeresultINV(scope.row,scope.$index)"  v-model="scope.row.ReliabilityINV">
                          <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value"></el-option>
                      </el-select>
                      <span v-else="showEdit[scope.$index] && (statu === 7 || statu === 4)">${ reliabilityinv[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>
            <el-table-column label="Compatibility" width="110" align="center">
                <template slot-scope="scope">
                      <el-select class="edit-cell" v-if="showEdit[scope.$index] && (statu === 7 || statu === 4)"  @change="changeresultINV(scope.row,scope.$index)"  v-model="scope.row.CompatibilityINV">
                          <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value"></el-option>
                      </el-select>
                      <span v-else="showEdit[scope.$index] && (statu === 7 || statu === 4)">${ compatibilityinv[scope.$index+(currentPage-1)*pageSize] }</span>
                </template>
            </el-table-column>

        </el-table-column>
{#        <el-table-column label="INV for RD" align="center">#}
{#            <el-table-column label="ESD" width="50" align="center">#}
{#                <template slot-scope="scope">#}
{#                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 2 || statu === 4)"    v-model="scope.row.ESDINV"></el-input>#}
{#                      <span v-else="showEdit[scope.$index] && (statu === 2 || statu === 4)">${ esdinv[scope.$index+(currentPage-1)*pageSize] }</span>#}
{#                </template>#}
{#            </el-table-column>#}
{#            <el-table-column label="EMI" width="50" align="center">#}
{#                <template slot-scope="scope">#}
{#                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 2 || statu === 4)"    v-model="scope.row.EMIINV"></el-input>#}
{#                      <span v-else="showEdit[scope.$index] && (statu === 2 || statu === 4)">${ eminv[scope.$index+(currentPage-1)*pageSize] }</span>#}
{#                </template>#}
{#            </el-table-column>#}
{#            <el-table-column label="RF" width="50" align="center">#}
{#                <template slot-scope="scope">#}
{#                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 2 || statu === 4)"    v-model="scope.row.RFINV"></el-input>#}
{#                      <span v-else="showEdit[scope.$index] && (statu === 2 || statu === 4)">${ rfinv[scope.$index+(currentPage-1)*pageSize] }</span>#}
{#                </template>#}
{#            </el-table-column>#}
{#        </el-table-column>#}
        <el-table-column label="Control run" width="100" align="center">
            <template slot-scope="scope">
                      <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.Controlrun"></el-input>
                      <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ controlrun[scope.$index+(currentPage-1)*pageSize] }</span>
            </template>
        </el-table-column>
        <el-table-column  label="SP" width="40" align="center">
             <template slot-scope="scope">
            <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.SourcePriority"></el-input>
                 <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ sourcepriority[scope.$index+(currentPage-1)*pageSize] }</span>
            </template>
        </el-table-column>
        <el-table-column  label="Compal P/N" width="113" align="center" >
             <template slot-scope="scope">
            <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.CompalPN"></el-input>
                 <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ compalPN[scope.$index+(currentPage-1)*pageSize] }</span>
            </template>
        </el-table-column>
        <el-table-column  label="Status" align="center">
             <template slot-scope="scope">
            <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.Status"></el-input>
                 <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ status[scope.$index+(currentPage-1)*pageSize] }</span>
            </template>
        </el-table-column>
        <el-table-column label="Vendor P/N" width="100" align="center">
             <template slot-scope="scope">
            <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.VendorPN"></el-input>
                  <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ vendorPN[scope.$index+(currentPage-1)*pageSize] }</span>
            </template>
        </el-table-column>
        <el-table-column label="Description" align="center" width="204" >
             <template slot-scope="scope">
            <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.Description"></el-input>
                 <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ description[scope.$index+(currentPage-1)*pageSize] }</span>
            </template>
        </el-table-column>
        <el-table-column label="Qty" align="center">
             <template slot-scope="scope">
            <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.Qty"></el-input>
                 <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ qty[scope.$index+(currentPage-1)*pageSize] }</span>
            </template>
        </el-table-column>
        <el-table-column label="Location" align="center" width="126">
             <template slot-scope="scope">
            <el-input class="edit-cell" v-if="showEdit[scope.$index] && (statu === 6 || statu === 4)"    v-model="scope.row.Location"></el-input>
                 <span v-else="showEdit[scope.$index] && (statu === 6 || statu === 4)">${ location[scope.$index+(currentPage-1)*pageSize] }</span>
            </template>
        </el-table-column>

        <el-table-column label="Comments" width="500" align="left" >
            <template slot-scope="scope">
                      <textarea class="edit-cell" v-if="showEdit[scope.$index]&& (statu === 2 || statu === 3|| statu === 4|| statu === 5|| statu === 6)" cols="50" rows="4"  v-model="scope.row.Comment"></textarea>
                      <span style="white-space: pre-line" v-if="!showEdit[scope.$index]&& (statu === 2 || statu === 3|| statu === 4|| statu === 5|| statu === 6)">${ comments[scope.$index+(currentPage-1)*pageSize] }</span>
            </template>
        </el-table-column>
        <el-table-column label="操作" width="120" align="center" fixed="right">
        <template slot-scope="scope">
            <el-button type="text" size="small"     @click.native="saveRow(scope.$index, scope.row)"     v-if="showBtn[scope.$index]">保存</el-button>
            <el-button type="text" size="small"     @click.native="cancelRow(scope.$index, scope.row)"     v-if="showBtn[scope.$index]">取消</el-button>

            <el-button type="text" size="big"     @click.native="editRow(scope.$index, scope.row)"    v-if="!showBtn[scope.$index]">编辑</el-button>
        </template>
        </el-table-column>
        {% comment %}<el-table-column align="right">
        <template slot="header" slot-scope="scope">
        <el-input v-model="search" size="mini" placeholder="输入关键字模糊搜索"/>
        </template>
        </el-table-column>{% endcomment %}
    </el-table>
    <div class="block">
    <el-pagination  @size-change="handleSizeChange" @current-change="handleCurrentChange" :current-page="currentPage" :page-sizes="[10, 50, 100, 200]" :page-size="pageSize" layout="total, sizes, prev, pager, next, jumper" :total="totalNum">
    </el-pagination>
  </div>
</template>
</div>
{% endblock %}
{% block scripts %}
<script src="/static/js/es6/polyfill.min.js"></script>
<script src="/static/js/es6/babel.min.js"></script>
<script src="/static/js/axios.min.js"></script>
<script src="/static/js/vue.min.js"></script>
<script src="/static/js/qs.js"></script>
<script src="/static/js/Element/index.js"></script>
<script type="text/babel">
$(document).ready(function() {
    $("#yincang").click(function () {
        $("#container-yansebiaoshi").toggle();
    });
    $("body").click(function (e) {
    if (!$(e.target).closest("#yincang").length) {
        $("#container-yansebiaoshi").hide();
    }
    });
})
    new Vue({
        el: '#app',
        delimiters: ['${', '}'],
        data: function () {
            return {
                options: [{value: 'QS', label: 'QS'}, {value: 'Qd_L', label: 'Qd_L'}, {value: 'Qd_C', label: 'Qd_C'}, {value: 'QT', label: 'QT'}, {value: 'QF', label: 'QF'}, {value: 'QF_L', label: 'QF_L'}, {value: 'DisQ', label: 'DisQ'}, {value: 'Drop', label: 'Drop'}, {value: 'Not Build', label: 'Not Build'}],
                visible: false,
                tableContent: [],
                    project:[],
                    category:[],
                    name:[],
                vendor:[],
                sourcepriority:[],
                compalPN:[],
                status:[],
                vendorPN:[],
                description:[],
                qty:[],
                location:[],
                datacodeb:[],
                reliabilityb:[],
                compatibilityb:[],
                resultforb:[],
                esdb:[],
                emib:[],
                rfb:[],
                datacodec:[],
                reliabilityc:[],
                compatibilityc:[],
                resultforc:[],
                esdc:[],
                emic:[],
                rfc:[],
                    datacodeinv:[],
                    reliabilityinv:[],
                    compatibilityinv:[],
                    resultforinv:[],
                    esdinv:[],
                    emiinv:[],
                    rfinv:[],
                controlrun:[],
                comments:[],
                 Comment:null,
                showEdit: [], //显示编辑框
                showBtn: [],
                showBtnOrdinary: true,
                selectedCustomer:null,
                selectedProject:null,
                selectedPhase:null,
                selectPhase:null,
                selectProject:[],
                selectItem:{},
                selectId:null,
                statu:null,
                flag:null,
                currentPage: 1,//默认显示第一页
                pageSize:100,//默认每页显示100条
                totalNum: null,
                search: '',
                multiDeleteVisible:false,
                multipleSelection: [],
                elbuttonloading:false,
                tableloading:false,

            }
        },
         computed: {
                // 前端过滤
                tables () {
                  const search = this.search
                  if (search) {
                    return this.tableData.filter(dataNews => {
                      return Object.keys(dataNews).some(key => {
                        return String(dataNews[key]).toLowerCase().indexOf(search) > -1
                      })
                    })
                  }
                  return this.tableData
                },
                // 总条数
                total () {
                  return this.tables.length
                }
              },

        

        mounted(){        // 页面渲染后触发该区域内容 即页面初始化
            this.getdata("first");
        },
        methods: {
            // 前端过滤
            format (val) {
              val = val.toString()
              if (val.indexOf(this.search) !== -1 && this.search !== '') {
                return val.replace(this.search, '<font color="red">' + this.search + '</font>')
              } else {
                return val
              }
            },
            dateFormat (val) {
              return moment(val).format('YYYY-MM-DD')
            },

            siteTableHeader () {
              return 'sws-table-header'
            },
            tableRowClassName ({ row, rowIndex }) {
              if (rowIndex % 2) {
                return 'warning-row'
              } else {
                return 'success-row'
              }
            },

            handleSizeChange(val) {
        console.log(`每页 ${val} 条`);
                this.pageSize = val;
          },
          handleCurrentChange(val) {
            console.log(`当前页: ${val}`);
              this.currentPage = val;
              console.log(this.tableContent.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize));
          },
            //获取数据
            getdata: function (e) {
                this.tableloading = true;
                this.elbuttonloading = true;
                let data = {"isGetData": e, "csrfmiddlewaretoken": $("[name='csrfmiddlewaretoken']").val()};
                axios.post("/MQM/MQM_edit/", Qs.stringify(data), {
                    headers: {'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'}
                }).then((res) => {
                    this.tableContent = res.data.content;
                    this.selectItem=res.data.select;
                    this.totalNum=this.tableContent.length;
                    //this.statu=res.data.orr;

                    for(let i=0;i<this.tableContent.length;i++) {
                               this.project[i] =this.tableContent[i].Project;
                               this.category[i] = this.tableContent[i].Category;
                               this.name[i] = this.tableContent[i].Name;
                        this.vendor[i] = this.tableContent[i].Vendor;
                        this.sourcepriority[i] = this.tableContent[i].SourcePriority;
                        this.compalPN[i] = this.tableContent[i].CompalPN;
                        this.status[i] = this.tableContent[i].Status;
                        this.vendorPN[i] = this.tableContent[i].VendorPN;
                        this.description[i] = this.tableContent[i].Description;
                        this.qty[i] = this.tableContent[i].Qty;
                        this.location[i] = this.tableContent[i].Location;
                        this.datacodeb[i] = this.tableContent[i].DataCodeB;
                        this.reliabilityb[i] = this.tableContent[i].ReliabilityB;
                        this.compatibilityb[i] = this.tableContent[i].CompatibilityB;
                        this.resultforb[i] = this.tableContent[i].ResultforB;
                        this.esdb[i] = this.tableContent[i].ESDB;
                        this.emib[i] = this.tableContent[i].EMIB;
                        this.rfb[i] = this.tableContent[i].RFB;
                        this.datacodec[i] = this.tableContent[i].DataCodeC;
                        this.reliabilityc[i] = this.tableContent[i].ReliabilityC;
                        this.compatibilityc[i] = this.tableContent[i].CompatibilityC;
                        this.resultforc[i] = this.tableContent[i].ResultforC;
                        this.esdc[i] = this.tableContent[i].ESDC;
                        this.emic[i] = this.tableContent[i].EMIC;
                        this.rfc[i] = this.tableContent[i].RFC;
                                this.datacodeinv[i] = this.tableContent[i].DataCodeINV;
                                this.reliabilityinv[i] = this.tableContent[i].ReliabilityINV;
                                this.compatibilityinv[i] = this.tableContent[i].CompatibilityINV;
                                this.resultforinv[i] = this.tableContent[i].ResultforINV;
                                this.esdinv[i] = this.tableContent[i].ESDINV;
                                this.emiinv[i] = this.tableContent[i].EMIINV;
                                this.rfinv[i] = this.tableContent[i].RFINV;
                        this.controlrun[i] = this.tableContent[i].Controlrun;
                        this.comments[i] = this.tableContent[i].Comments;
                    }
                    this.tableloading = false;
                    this.elbuttonloading = false;
                });
            },
            //索引
            indexMethod(index) {
                    return index +1;
            },
            //编辑
            editRow(index, row,cell) {
            this.$set(this.showEdit,index,true);
            this.$set(this.showBtn,index,true);
            },
            //保存
            saveRow(index,rows) {
                    let Customer = this.$refs.Customer.value;
                    let Project = this.$refs.Project.value;
                    let data = {"isGetData": "SAVE", "rows": rows,"Customer":Customer,"Project":Project, "csrfmiddlewaretoken": $("[name='csrfmiddlewaretoken']").val()
                    };
                    axios.post("/MQM/MQM_edit/", data, {
                        //headers: {'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'}
                    }).then((res) => {
                         this.tableContent = res.data.content;
                         this.flag=res.data.orn;
                         this.statu=res.data.orr;
                        console.log(this.flag);
                        for (let i = 0; i < this.tableContent.length; i++) {
                                this.project[i] =this.tableContent[i].Project;
                                this.category[i] = this.tableContent[i].Category;
                                this.name[i] = this.tableContent[i].Name;
                            this.vendor[i] = this.tableContent[i].Vendor;
                            this.sourcepriority[i] = this.tableContent[i].SourcePriority;
                            this.compalPN[i] = this.tableContent[i].CompalPN;
                            this.status[i] = this.tableContent[i].Status;
                            this.vendorPN[i] = this.tableContent[i].VendorPN;
                            this.description[i] = this.tableContent[i].Description;
                            this.qty[i] = this.tableContent[i].Qty;
                            this.location[i] = this.tableContent[i].Location;
                            this.datacodeb[i] = this.tableContent[i].DataCodeB;
                            this.reliabilityb[i] = this.tableContent[i].ReliabilityB;
                            this.compatibilityb[i] = this.tableContent[i].CompatibilityB;
                            this.resultforb[i] = this.tableContent[i].ResultforB;
                            this.esdb[i] = this.tableContent[i].ESDB;
                            this.emib[i] = this.tableContent[i].EMIB;
                            this.rfb[i] = this.tableContent[i].RFB;
                            this.datacodec[i] = this.tableContent[i].DataCodeC;
                            this.reliabilityc[i] = this.tableContent[i].ReliabilityC;
                            this.compatibilityc[i] = this.tableContent[i].CompatibilityC;
                            this.resultforc[i] = this.tableContent[i].ResultforC;
                            this.esdc[i] = this.tableContent[i].ESDC;
                            this.emic[i] = this.tableContent[i].EMIC;
                            this.rfc[i] = this.tableContent[i].RFC;
                                this.datacodeinv[i] = this.tableContent[i].DataCodeINV;
                                this.reliabilityinv[i] = this.tableContent[i].ReliabilityINV;
                                this.compatibilityinv[i] = this.tableContent[i].CompatibilityINV;
                                this.resultforinv[i] = this.tableContent[i].ResultforINV;
                                this.esdinv[i] = this.tableContent[i].ESDINV;
                                this.emiinv[i] = this.tableContent[i].EMIINV;
                                this.rfinv[i] = this.tableContent[i].RFINV;
                            this.controlrun[i] = this.tableContent[i].Controlrun;
                            this.comments[i] = this.tableContent[i].Comments;
                        }

                        if(this.flag==0) {
                    this.$set(this.showEdit, index, false);
                    this.$set(this.showBtn, index, false);//关闭页面
                }else{
                    alert(this.flag);
                }
                    });


           },
            //取消编辑
            cancelRow(index, row) {
                    this.tableContent[index].Project=this.project[index];
                    this.tableContent[index].Category=this.category[index];
                    this.tableContent[index].Name=this.name[index];
               this.tableContent[index].Vendor=this.vendor[index];
               this.tableContent[index].SourcePriority=this.sourcepriority[index];
               this.tableContent[index].CompalPN=this.compalPN[index];
               this.tableContent[index].Status=this.status[index];
               this.tableContent[index].VendorPN=this.vendorPN[index];
               this.tableContent[index].Description=this.description[index];
               this.tableContent[index].Qty=this.qty[index];
               this.tableContent[index].Location=this.location[index];
               this.tableContent[index].DataCodeB=this.datacodeb[index];
               this.tableContent[index].ReliabilityB=this.reliabilityb[index];
               this.tableContent[index].CompatibilityB=this.compatibilityb[index];
               this.tableContent[index].ResultforB=this.resultforb[index];
               this.tableContent[index].ESDB=this.esdb[index];
               this.tableContent[index].EMIB=this.emib[index];
               this.tableContent[index].RFB=this.rfb[index];
               this.tableContent[index].DataCodeC=this.datacodec[index];
               this.tableContent[index].ReliabilityC=this.reliabilityc[index];
               this.tableContent[index].CompatibilityC=this.compatibilityc[index];
               this.tableContent[index].ResultforC=this.resultforc[index];
               this.tableContent[index].ESDC=this.esdc[index];
               this.tableContent[index].EMIC=this.emic[index];
               this.tableContent[index].RFC=this.rfc[index];
                    this.tableContent[index].DataCodeINV=this.datacodeinv[index];
                    this.tableContent[index].ReliabilityINV=this.reliabilityinv[index];
                    this.tableContent[index].CompatibilityINV=this.compatibilityinv[index];
                    this.tableContent[index].ResultforINV=this.resultforinv[index];
                    this.tableContent[index].ESDINV=this.esdinv[index];
                    this.tableContent[index].EMIINV=this.emiinv[index];
                    this.tableContent[index].RFINV=this.rfinv[index];
               this.tableContent[index].Controlrun=this.controlrun[index];
               this.tableContent[index].Comments=this.comments[index];
             this.$set(this.showEdit,index,false);
             this.$set(this.showBtn,index,false) ;
           },
            //级联
            changeCustomer:function () {
                 if(this.$refs.Customer.value ==""){
                      this.selectProject=[""];
                      return false;
                 }
                 this.selectProject=this.selectItem[this.$refs.Customer.value];
                 this.selectedProject="";
                 console.log(this.selectProject);
             },
            changeProject:function(index){
                if(this.$refs.Project.value ==""){
                      this.selectPhase=[""];
                      return false;
                 }
                for(let index=0;index<this.selectItem[this.selectedCustomer].length;index++){
                     if(this.selectItem[this.selectedCustomer][index]["Project"]==this.selectedProject){
                        this.selectPhase=this.selectItem[this.selectedCustomer][index]["Phase"];
                    }
                }
            },
            //上传搜索项：以此选项搜索符合条件的内容
            selectMsg :function(){
                this.tableloading = true;
                this.elbuttonloading = true;
               let Customer = this.$refs.Customer.value;
               let Project = this.$refs.Project.value;
               let data ={"isGetData":"SEARCH","Customer":Customer,"Project":Project,"csrfmiddlewaretoken":$("[name='csrfmiddlewaretoken']").val()}
               axios.post("/MQM/MQM_edit/",Qs.stringify(data), {
               headers:{ 'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'}
                }).then((res) => {
                  console.log(res.data.content,'111');
                  this.tableContent=res.data.content;
                  this.statu=res.data.orr;
                  this.selectItem=res.data.select;
                  this.totalNum=this.tableContent.length;
                  console.log(res.data.orr,this.statu,typeof (this.statu),'yyy')
                   for (let i = 0; i < this.tableContent.length; i++) {
                                this.project[i] =this.tableContent[i].Project;
                                this.category[i] = this.tableContent[i].Category;
                                this.name[i] = this.tableContent[i].Name;
                            this.vendor[i] = this.tableContent[i].Vendor;
                            this.sourcepriority[i] = this.tableContent[i].SourcePriority;
                            this.compalPN[i] = this.tableContent[i].CompalPN;
                            this.status[i] = this.tableContent[i].Status;
                            this.vendorPN[i] = this.tableContent[i].VendorPN;
                            this.description[i] = this.tableContent[i].Description;
                            this.qty[i] = this.tableContent[i].Qty;
                            this.location[i] = this.tableContent[i].Location;
                            this.datacodeb[i] = this.tableContent[i].DataCodeB;
                            this.reliabilityb[i] = this.tableContent[i].ReliabilityB;
                            this.compatibilityb[i] = this.tableContent[i].CompatibilityB;
                            this.resultforb[i] = this.tableContent[i].ResultforB;
                            this.esdb[i] = this.tableContent[i].ESDB;
                            this.emib[i] = this.tableContent[i].EMIB;
                            this.rfb[i] = this.tableContent[i].RFB;
                            this.datacodec[i] = this.tableContent[i].DataCodeC;
                            this.reliabilityc[i] = this.tableContent[i].ReliabilityC;
                            this.compatibilityc[i] = this.tableContent[i].CompatibilityC;
                            this.resultforc[i] = this.tableContent[i].ResultforC;
                            this.esdc[i] = this.tableContent[i].ESDC;
                            this.emic[i] = this.tableContent[i].EMIC;
                            this.rfc[i] = this.tableContent[i].RFC;
                                this.datacodeinv[i] = this.tableContent[i].DataCodeINV;
                                this.reliabilityinv[i] = this.tableContent[i].ReliabilityINV;
                                this.compatibilityinv[i] = this.tableContent[i].CompatibilityINV;
                                this.resultforinv[i] = this.tableContent[i].ResultforINV;
                                this.esdinv[i] = this.tableContent[i].ESDINV;
                                this.emiinv[i] = this.tableContent[i].EMIINV;
                                this.rfinv[i] = this.tableContent[i].RFINV;
                            this.controlrun[i] = this.tableContent[i].Controlrun;
                            this.comments[i] = this.tableContent[i].Comments;
                        }
                        this.tableloading = false;
                        this.elbuttonloading = false;
                })
             },
           changeresultB:function(rows,index){
                if(rows.ReliabilityB==''|| rows.CompatibilityB==''){
                    rows.ResultforB='';
                }
                else if(rows.ReliabilityB=='Not Build'|| (rows.CompatibilityB=='Not Build'&& rows.CompatibilityB!=='')){
                    rows.ResultforB='Not Build';
                }
                else if(rows.ReliabilityB=='QS'&& rows.CompatibilityB=='QS'){
                    rows.ResultforB=rows.ReliabilityB;
                }
                else if(rows.ReliabilityB=='Drop'&& rows.CompatibilityB!=='Not Build'&& rows.CompatibilityB!==''){
                    rows.ResultforB=rows.ReliabilityB;
                }
                else if(rows.ReliabilityB=='DisQ'&& rows.CompatibilityB!=='Not Build'&& rows.CompatibilityB!=='Drop'&& rows.CompatibilityB!==''){
                    rows.ResultforB=rows.ReliabilityB;
                }
                else if(rows.ReliabilityB=='QF'&& rows.CompatibilityB!=='Not Build'&& rows.CompatibilityB!=='Drop'&& rows.CompatibilityB!=='DisQ'&& rows.CompatibilityB!==''){
                    rows.ResultforB=rows.ReliabilityB;
                }
                else if(rows.ReliabilityB=='QF_L'&& rows.CompatibilityB!=='Not Build'&& rows.CompatibilityB!=='Drop'&& rows.CompatibilityB!=='DisQ'&& rows.CompatibilityB!=='QF'&& rows.CompatibilityB!==''){
                    rows.ResultforB=rows.ReliabilityB;
                }
                else if(rows.ReliabilityB=='QT'&& rows.CompatibilityB!=='Not Build'&& rows.CompatibilityB!=='Drop'&& rows.CompatibilityB!=='DisQ'&& rows.CompatibilityB!=='QF'&& rows.CompatibilityB!=='QF_L'&& rows.CompatibilityB!==''){
                    rows.ResultforB=rows.ReliabilityB;
                }
                else if(rows.ReliabilityB=='Qd_C'&& rows.CompatibilityB!=='Not Build'&& rows.CompatibilityB!=='Drop'&& rows.CompatibilityB!=='DisQ'&& rows.CompatibilityB!=='QF'&& rows.CompatibilityB!=='QF_L'&& rows.CompatibilityB!=='QT'&& rows.CompatibilityB!==''){
                    rows.ResultforB=rows.ReliabilityB;
                }
                else if(rows.ReliabilityB=='Qd_L'&& rows.CompatibilityB=='QS'){
                    rows.ResultforB=rows.ReliabilityB;
                }
                else{
                    rows.ResultforB=rows.CompatibilityB;
                }
            },
            changeresultC:function(rows,index){
                console.log(rows.ReliabilityC,rows.CompatibilityC,rows.ReliabilityC=='Drop',rows.CompatibilityC!=='Not Build',rows.ReliabilityC=='Drop'&& rows.CompatibilityC!=='Not Build',"g");
                //console.log(rows.ResultforC,'f')
                if(rows.ReliabilityC==''|| rows.CompatibilityC==''){
                    rows.ResultforC='';
                }
                else  if(rows.ReliabilityC=='Not Build'|| (rows.CompatibilityC=='Not Build'&&rows.CompatibilityC!=='')){
                      rows.ResultforC='Not Build';
                }
                else if(rows.ReliabilityC=='QS'&& rows.CompatibilityC=='QS'){
                    rows.ResultforC='QS';
                }

                else if(rows.ReliabilityC=='Drop'&& rows.CompatibilityC!=='Not Build'&&rows.CompatibilityC!==''){
                    rows.ResultforC=rows.ReliabilityC;
                }
                else if(rows.ReliabilityC=='DisQ'&& rows.CompatibilityC!=='Not Build'&& rows.CompatibilityC!=='Drop'&&rows.CompatibilityC!==''){
                    rows.ResultforC='DisQ';
                }
                else if(rows.ReliabilityC=='QF'&& rows.CompatibilityC!=='Not Build'&& rows.CompatibilityC!=='Drop'&& rows.CompatibilityC!=='DisQ'&&rows.CompatibilityC!==''){
                    rows.ResultforC='QF';
                }
                else if(rows.ReliabilityC=='QF_L'&& rows.CompatibilityC!=='Not Build'&& rows.CompatibilityC!=='Drop'&& rows.CompatibilityC!=='DisQ'&& rows.CompatibilityC!=='QF'&&rows.CompatibilityC!==''){
                    rows.ResultforC='QF_L';
                }
                else if(rows.ReliabilityC=='QT'&& rows.CompatibilityC!=='Not Build'&& rows.CompatibilityC!=='Drop'&& rows.CompatibilityC!=='DisQ'&& rows.CompatibilityC!=='QF'&& rows.CompatibilityC!=='QF_L'&&rows.CompatibilityC!==''){
                    rows.ResultforC='QT';
                }
                else if(rows.ReliabilityC=='Qd_C'&& rows.CompatibilityC!=='Not Build'&& rows.CompatibilityC!=='Drop'&& rows.CompatibilityC!=='DisQ'&& rows.CompatibilityC!=='QF'&& rows.CompatibilityC!=='QF_L'&& rows.CompatibilityC!=='QT'&&rows.CompatibilityC!==''){
                    rows.ResultforC='Qd_C';
                }
                else if(rows.ReliabilityC=='Qd_L'&& rows.CompatibilityC=='QS'){
                    rows.ResultforC='Qd_L';
                }
                else{
                    rows.ResultforC=rows.CompatibilityC;
                }
            },
            changeresultINV:function(rows,index){
                if(rows.ReliabilityINV==''|| rows.CompatibilityINV==''){
                    rows.ResultforINV='';
                }
                else if(rows.ReliabilityINV=='Not Build'|| (rows.CompatibilityINV=='Not Build'&& rows.CompatibilityINV !=='')){
                    rows.ResultforINV='Not Build';
                }
                else if(rows.ReliabilityINV=='QS'&& rows.CompatibilityINV=='QS'){
                    rows.ResultforINV=rows.ReliabilityINV;
                }
                else if(rows.ReliabilityINV=='Drop'&& rows.CompatibilityINV!=='Not Build'&& rows.CompatibilityINV !==''){
                    rows.ResultforINV=rows.ReliabilityINV;
                }
                else if(rows.ReliabilityINV=='DisQ'&& rows.CompatibilityINV!=='Not Build'&& rows.CompatibilityINV!=='Drop'&& rows.CompatibilityINV !==''){
                    rows.ResultforINV=rows.ReliabilityINV;
                }
                else if(rows.ReliabilityINV=='QF'&& rows.CompatibilityINV!=='Not Build' && rows.CompatibilityINV!=='Drop' && rows.CompatibilityINV!=='DisQ'&& rows.CompatibilityINV !==''){
                    rows.ResultforINV=rows.ReliabilityINV;
                }
                else if(rows.ReliabilityINV=='QF_L'&& rows.CompatibilityINV!=='Not Build' && rows.CompatibilityINV!=='Drop' && rows.CompatibilityINV!=='DisQ' && rows.CompatibilityINV!=='QF'&& rows.CompatibilityINV !==''){
                    rows.ResultforINV=rows.ReliabilityINV;
                }
                else if(rows.ReliabilityINV=='QT'&& rows.CompatibilityINV!=='Not Build'&& rows.CompatibilityINV !== 'Drop' && rows.CompatibilityINV!=='DisQ'&& rows.CompatibilityC!=='QF'&& rows.CompatibilityC!=='QF_L'&& rows.CompatibilityINV !==''){
                    rows.ResultforINV=rows.ReliabilityINV;
                }
                else if(rows.ReliabilityINV=='Qd_C'&& (rows.CompatibilityINV=='QS'|| rows.CompatibilityINV=='Qd_L')){
                    rows.ResultforINV=rows.ReliabilityINV;
                }
                else if(rows.ReliabilityINV=='Qd_L'&& rows.CompatibilityINV=='QS'){
                    rows.ResultforINV=rows.ReliabilityINV;
                }
                else{
                    rows.ResultforINV=rows.CompatibilityINV;
                }
            },
           addClass({row, column, rowIndex, columnIndex}) {
                {% comment %}console.log('addcolor',rowIndex, columnIndex){% endcomment %}
                {% comment %}if (columnIndex === 7 && (row.ReliabilityB === 'QS'|| row.ReliabilityB === 'Qd_L'|| row.ReliabilityB === 'Qd_C')) {
                    console.log("lie",row)
                        return {
                                  background: '#00FF00'
                                }
                }
                if (columnIndex === 8 && (row.CompatibilityB === 'QS'|| row.CompatibilityB === 'Qd_L'|| row.CompatibilityB === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }{% endcomment %}
                if (columnIndex === 7 && (row.ResultforB === 'QS'|| row.ResultforB === 'Qd_L'|| row.ResultforB === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
                {% comment %}if (columnIndex === 11 && (row.ReliabilityC === 'QS'|| row.ReliabilityC === 'Qd_L'|| row.ReliabilityC === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
                if (columnIndex === 12 && (row.CompatibilityC === 'QS'|| row.CompatibilityC === 'Qd_L'|| row.CompatibilityC === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }{% endcomment %}
                if (columnIndex === 11 && (row.ResultforC === 'QS'|| row.ResultforC === 'Qd_L'|| row.ResultforC === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
                {% comment %}if (columnIndex === 15 && (row.ReliabilityINV === 'QS'|| row.ReliabilityINV === 'Qd_L'|| row.ReliabilityINV === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }
                if (columnIndex === 16 && (row.CompatibilityINV === 'QS'|| row.CompatibilityINV === 'Qd_L'|| row.CompatibilityINV === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }{% endcomment %}
                if (columnIndex === 15 && (row.ResultforINV === 'QS'|| row.ResultforINV === 'Qd_L'|| row.ResultforINV === 'Qd_C')) {
                        return {
                                  background: '#00FF00'
                                }
                }

                {% comment %}if (columnIndex === 7 && row.ReliabilityB === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                if (columnIndex === 8 && row.CompatibilityB === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }{% endcomment %}
                if (columnIndex === 7 && row.ResultforB === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
               {% comment %} if (columnIndex === 11 && row.ReliabilityC === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                if (columnIndex === 12 && row.CompatibilityC === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }{% endcomment %}
                if (columnIndex === 11 && row.ResultforC === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                {% comment %}if (columnIndex === 15 && row.ReliabilityINV === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }
                if (columnIndex === 16 && row.CompatibilityINV === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }{% endcomment %}
                if (columnIndex === 15 && row.ResultforINV === 'QT') {
                        return {
                                  background: '#FFFF00'
                                }
                }


                {% comment %}if (columnIndex === 7 && (row.ReliabilityB === 'QF'|| row.ReliabilityB === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 8 && (row.CompatibilityB === 'QF'||row.CompatibilityB === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }{% endcomment %}
                if (columnIndex === 7 && (row.ResultforB === 'QF'|| row.ResultforB === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 7 && (row.ResultforB === 'QF_L'|| row.ResultforB === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                {% comment %}if (columnIndex === 11 && (row.ReliabilityC === 'QF'||row.ReliabilityC === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 12 && (row.CompatibilityC === 'QF'|| row.CompatibilityC === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }{% endcomment %}
                if (columnIndex === 11 && (row.ResultforC === 'QF'|| row.ResultforC === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 11 && (row.ResultforC === 'QF_L'|| row.ResultforC === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                {% comment %}if (columnIndex === 15 && (row.ReliabilityINV === 'QF'|| row.ReliabilityINV === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 16 && (row.CompatibilityINV === 'QF'|| row.CompatibilityINV === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }{% endcomment %}
                if (columnIndex === 15 && (row.ResultforINV === 'QF'|| row.ResultforINV === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }
                if (columnIndex === 15 && (row.ResultforINV === 'QF_L'|| row.ResultforINV === 'DisQ')) {
                        return {
                                  background: '#FF0000'
                                }
                }


                {% comment %}if (columnIndex === 7 && (row.ReliabilityB === 'Drop'|| row.ReliabilityB === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                if (columnIndex === 8 && (row.CompatibilityB === 'Drop'|| row.CompatibilityB === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }{% endcomment %}
                if (columnIndex === 7 && (row.ResultforB === 'Drop'|| row.ResultforB === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                {% comment %}if (columnIndex === 11 && (row.ReliabilityC === 'Drop'|| row.ReliabilityC === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                if (columnIndex === 12 && (row.CompatibilityC === 'Drop'|| row.CompatibilityC === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }{% endcomment %}
                if (columnIndex === 11 && (row.ResultforC === 'Drop'|| row.ResultforC === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                {% comment %}if (columnIndex === 15 && (row.ReliabilityINV === 'Drop'|| row.ReliabilityINV === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }
                if (columnIndex === 16 && (row.CompatibilityINV === 'Drop'|| row.CompatibilityINV === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }{% endcomment %}
                if (columnIndex === 15 && (row.ResultforINV === 'Drop'|| row.ResultforINV === 'Not Build')) {
                        return {
                                  background: '#696969'
                                }
                }

                },
             handleSelectionChange(rows) {
                this.multipleSelection = rows;
            },
         getRowKeys (row) {
              return row.id
            },
          multiDelete() {
                var warning=confirm('此操作将永久删除该条数据, 是否继续?')
         if(warning) {
             this.tableloading = true;
                this.elbuttonloading = true;
             this.multiDeleteVisible = false;
             let checkArr = this.multipleSelection;   // multipleSelection存储了勾选到的数据
             let params = [];
             let self = this;
             checkArr.forEach(function (item) {
                 console.log(item);
                 params.push(item.id);       // 添加所有需要删除数据的id到一个数组，post提交过去
             });
             console.log(params);
              let Customer = this.$refs.Customer.value;
               let Project = this.$refs.Project.value;
             let data = {
                 "isGetData": "MUTIDELETE",
                 "params": params,
                 "Customer":Customer,"Project":Project,
                 "csrfmiddlewaretoken": $("[name='csrfmiddlewaretoken']").val()
             };
             axios.post('/MQM/MQM_edit/', data).then((res) =>{

                     this.tableContent = res.data.content;
                     console.log(this.tableContent,'mul')
                       for(let i=0;i<this.tableContent.length;i++) {
                               this.project[i] =this.tableContent[i].Project;
                               this.category[i] = this.tableContent[i].Category;
                               this.name[i] = this.tableContent[i].Name;
                        this.vendor[i] = this.tableContent[i].Vendor;
                        this.sourcepriority[i] = this.tableContent[i].SourcePriority;
                        this.compalPN[i] = this.tableContent[i].CompalPN;
                        this.status[i] = this.tableContent[i].Status;
                        this.vendorPN[i] = this.tableContent[i].VendorPN;
                        this.description[i] = this.tableContent[i].Description;
                        this.qty[i] = this.tableContent[i].Qty;
                        this.location[i] = this.tableContent[i].Location;
                        this.datacodeb[i] = this.tableContent[i].DataCodeB;
                        this.reliabilityb[i] = this.tableContent[i].ReliabilityB;
                        this.compatibilityb[i] = this.tableContent[i].CompatibilityB;
                        this.resultforb[i] = this.tableContent[i].ResultforB;
                        this.esdb[i] = this.tableContent[i].ESDB;
                        this.emib[i] = this.tableContent[i].EMIB;
                        this.rfb[i] = this.tableContent[i].RFB;
                        this.datacodec[i] = this.tableContent[i].DataCodeC;
                        this.reliabilityc[i] = this.tableContent[i].ReliabilityC;
                        this.compatibilityc[i] = this.tableContent[i].CompatibilityC;
                        this.resultforc[i] = this.tableContent[i].ResultforC;
                        this.esdc[i] = this.tableContent[i].ESDC;
                        this.emic[i] = this.tableContent[i].EMIC;
                        this.rfc[i] = this.tableContent[i].RFC;
                                this.datacodeinv[i] = this.tableContent[i].DataCodeINV;
                                this.reliabilityinv[i] = this.tableContent[i].ReliabilityINV;
                                this.compatibilityinv[i] = this.tableContent[i].CompatibilityINV;
                                this.resultforinv[i] = this.tableContent[i].ResultforINV;
                                this.esdinv[i] = this.tableContent[i].ESDINV;
                                this.emiinv[i] = this.tableContent[i].EMIINV;
                                this.rfinv[i] = this.tableContent[i].RFINV;
                        this.controlrun[i] = this.tableContent[i].Controlrun;
                        this.comments[i] = this.tableContent[i].Comments;
                    }
                     self.$message({
                         message: '删除成功',
                         type: 'success'
                     });
                 this.selectItem=res.data.select;
                 this.tableloading = false;
                this.elbuttonloading = false;
             })
         }else{
             return false;
         }
            },

        }
    })
</script>
{% endblock %}